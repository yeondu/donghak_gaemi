{% extends 'base.html' %}
{% load customfilter %}
{% block content %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <style>
    .btn-primary{
        border-radius:30px;
    }
    .card{margin-right:10px;
    float:left;}

    #triangle-up {
        width: 0;
            height: 0;
            border-bottom: 10px solid red;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
    }
    #triangle-down {
        width: 0px;
        height: 0px;
        border-left: 50px solid transparent;
        border-right: 50px solid transparent;
        border-top: 100px blue;
        background-color: blue;
    }
    .card-text{
        color:black;
    }
    </style>
    <!-- 종목 정보 -->
        <div  class = "row" style = "margin:20px;">
            <div class = "col">
                <span style = "font-size:50px;">{{ stock.stock_name }}</span>
                <span style = "font-size:20px;">{{ stock.stock_code }}</span>
            </div>
        </div>
        <div class = "row" style = "margin:20px;">
            <div class = "col">
                {% if difference.difference > 0 %}
                    <span style = "font-size:30px; color:red;">{{ close.close }}</span>
                    <span id="triangle-up"></span>
                    <span style = "color:red;"> {{ difference.difference }}</span>
                    <span style = "color:red;"> {{ fluction.fluction }}</span>
                {% else %}
                    <span style = "font-size:30px; color:blue;">{{ close.close }}</span>
                    <span id = "triangle-down"></span>
                    <span style = "color:blue;"> {{ difference.difference }}</span>
                    <span style = "color:blue;"> {{ fluction.fluction }}</span>
                {% endif %}
            </div>
        </div>
        <div class = "row" style = "margin:20px">
            <!-- 감성분석 결과 -->
            <h3>분석결과</h3>
            <div class = "col">
                <button class = "btn btn-primary" style = "border-radius: 30px;">감성분석</button>
                <button class = "btn btn-light" style = "border-radius: 30px;">AI분석</button>
            </div>
        </div>

        <div class = "row" style = "margin:20px">
            <!-- 뉴스 카드 -->
            <h3> 뉴스 </h3>
        </div>

    <div class = "container" style = "margin-left:20px;">
        <div class = "row">
            {% for n in page %}
                <div class = "col-sm-3" style="margin:5px;">
                    <div class = "card text-center" style = "border-radius: 30px;">
                        <div class = "card-header" style = "text-align:center">
                            {{ n.press }}
                        </div>
                        <div class = "card-body">
                            <a class = "card-text" href = {{ n.link }}>{{ n.title }}</a></br>
                            {% if n.result  == 1 %}
                                <button class = "btn btn-light" style = "background-color:rgba(250, 166, 176, 1);
border-radius:30px;">상승</button>
                            {% else %}
                                <button class = "btn btn-primary">하락</button>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% if forloop.counter|divisibleby:"3" and not forloop.last %}
                </div><div class = "row">
                {% endif %}
            {% endfor %}
        </div>

    </div>
    <!-- 페이징처리 -->
    <div class = "row">
        <ul class = "pagination justify-content-center">
            {% for page_number in page.paginator.page_range %}
            {% if page_number == page.number %}
            <li class = "page-item active" aria-current="page">
                <a class = "page-link" href = ?page={{ page_number }}>{{ page_number }}</a>
            </li>
            {% else %}
            <li class = "page-item">
                <a class = "page-link" href = "?page={{ page_number }}">{{ page_number }}</a>
            </li>
            {% endif %}
            {% endfor %}

        </ul>
    </div>


{% endblock %}