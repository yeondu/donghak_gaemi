# ë™í•™ê°œë¯¸ - ì£¼ì‹ ë‰´ìŠ¤ ë¶„ì„ ë° ì£¼ê°€ ì˜ˆì¸¡ ì›¹ì‚¬ì´íŠ¸

> [2021 í•œì´ìŒ ê³µëª¨ì „ ë™í•™ê°œë¯¸íŒ€] ë¹…ë°ì´í„° ê¸°ë°˜ ì£¼ì‹ ë° ë‰´ìŠ¤ ë¶„ì„ ì‹œìŠ¤í…œ êµ¬ì¶•

* Paper : [A Stock trend Prediction based on Explainable Artificial Intelligence](https://www.koreascience.or.kr/article/CFKO202133648830923.page)
* Tech Stacks : django, scikit-learn, xai, html, scrapy, beautiful-soup, mongodb, mysql, nlp
* Tools : figma, pycharm, git, jupyter-notebook, aws-ec2
* í”„ë¡œê·¸ë¨ ì‘ë™ ë™ì˜ìƒ : [YouTube Link](https://youtu.be/DE5gPhmNIAs)
<br/>

## ğŸŒ±  íŒ€ì› ì†Œê°œ

ì •ìˆ˜ë¯¼|ê¹€ì§€í˜„|ì´ì—°ìˆ˜|ì¡°ì„¤ì•„|ì•ˆì •ì€|
:-:|:-:|:-:|:-:|:-:
<img src='https://avatars.githubusercontent.com/u/83483431?v=4' height=80 width=80px></img>|<img src='https://avatars.githubusercontent.com/u/54613024?v=4' height=80 width=80px></img>|<img src='https://avatars.githubusercontent.com/u/80117053?v=4' height=80 width=80px></img>|<img src='https://avatars.githubusercontent.com/u/90924434?v=4' height=80 width=80px></img>|<img src='https://avatars.githubusercontent.com/u/80569863?v=4' height=80 width=80px></img>|
[Github](https://github.com/jasmine00716)|[Github](https://github.com/hijyun)|[Github](https://github.com/yslxx)|[Github](https://github.com/jarammm)|[Github](https://github.com/Ahn-jeongeun)

### Contribution  

* `ì •ìˆ˜ë¯¼` &nbsp; : &nbsp; íŒ€ì¥ â€¢ í”„ë¡œì íŠ¸ ê´€ë¦¬ â€¢ ì£¼ê°€ ë°ì´í„° ìˆ˜ì§‘ ë° ì €ì¥ â€¢ ì£¼ê°€ ì „ë§ ì˜ˆì¸¡ ì‹¤í—˜ ë° ë…¼ë¬¸ ì‘ì„± â€¢ ì„œë²„ ë‹´ë‹¹ <br>
* `ê¹€ì§€í˜„` &nbsp; : &nbsp; ë‰´ìŠ¤ ë°ì´í„° ìˆ˜ì§‘ ë° ì €ì¥ â€¢ ê°ì„± ë¶„ì„ â€¢ ì£¼ê°€ ì „ë§ ì˜ˆì¸¡ ì‹¤í—˜ ë° ë…¼ë¬¸ ì‘ì„±(1ì €ì) â€¢ í”„ë¡œì íŠ¸ ë°°í¬ <br>
* `ì´ì—°ìˆ˜` &nbsp; : &nbsp; í”„ë¡ íŠ¸ì—”ë“œ + ë°±ì—”ë“œ ì „ë°˜ â€¢ ì£¼ê°€ ì „ë§ ì˜ˆì¸¡ ì‹¤í—˜ ë° ë…¼ë¬¸ ì‘ì„± <br>
* `ì¡°ì„¤ì•„` &nbsp; : &nbsp; ë‰´ìŠ¤ ë°ì´í„° ìˆ˜ì§‘ ë° ì €ì¥ â€¢ ì£¼ê°€ ì „ë§ ì˜ˆì¸¡ ì‹¤í—˜ ë° ë…¼ë¬¸ ì‘ì„± â€¢ í”„ë¡ íŠ¸(ë² ì´ìŠ¤) <br>
* `ì•ˆì •ì€` &nbsp; : &nbsp; ì£¼ê°€ ì „ë§ ì˜ˆì¸¡ ì‹¤í—˜ ë° ë…¼ë¬¸ ì‘ì„± <br>

<br>

## ğŸ“– ìƒì„¸ ë‚´ìš©

![ë™í•™ê°œë¯¸ ì†Œê°œ](https://user-images.githubusercontent.com/90924434/173228452-0d7140c8-72cd-4f19-9bdc-307c559b36a0.png)

<aside>
  
ğŸ“ˆ ë™í•™ê°œë¯¸ëŠ” **ì£¼ê°€ ì˜ˆì¸¡ ë° ì¢…ëª© ë‰´ìŠ¤ ë¶„ì„ ì„œë¹„ìŠ¤**ë¡œ ë™í•™ ê°œë¯¸ë“¤ì˜ í•©ë¦¬ì ì¸ íˆ¬ì ê²°ì •ì„ ì‘ì›í•˜ëŠ” ë§ˆìŒìœ¼ë¡œ ì‹œì‘ëœ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤. ë™í•™ ê°œë¯¸ë¥¼ ìœ„í•œ í”„ë¡œì íŠ¸ì´ë¯€ë¡œ êµ­ë‚´ ì£¼ì‹ì„ ëŒ€ìƒìœ¼ë¡œ í•©ë‹ˆë‹¤. í•´ë‹¹ ì£¼ì‹ì´ 90ì¼ í›„ì— ìƒìŠ¹í• ì§€ í•˜ë½í• ì§€ì— ëŒ€í•œ **ì „ë§ì„ ì˜ˆì¸¡**í•œ ê²°ê³¼ì™€ ê´€ë ¨ ë‰´ìŠ¤ê°€ ì£¼ì‹ì— ê¸ì •ì ì¸ ì˜í–¥ì„ ì¤„ì§€, ë¶€ì •ì ì¸ ì˜í–¥ì„ ì¤„ì§€ **ê°ì„± ë¶„ì„**í•œ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤. ì£¼ê°€ ì˜ˆì¸¡ì—” ì•™ìƒë¸” ì•Œê³ ë¦¬ì¦˜ì´ ì‚¬ìš©ë˜ì—ˆìœ¼ë©°, **ì„¤ëª… ê°€ëŠ¥ ì¸ê³µì§€ëŠ¥ XAI ê¸°ë²•**ì¤‘ **SHAPê¸°ë²•**ì„ í™œìš©í•˜ì—¬ ëª¨í˜•ì„ í•´ì„ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ì œì‹œí•©ë‹ˆë‹¤.

</aside>

<br/>

## ğŸ—º  ì„œë¹„ìŠ¤ êµ¬ì„±ë„

![ë™í•™ê°œë¯¸ ì„œë¹„ìŠ¤ êµ¬ì„±ë„](https://user-images.githubusercontent.com/90924434/173228460-11f886f3-8f3e-43a6-8792-85c773c13468.png)

<br/>

## ğŸ› ï¸ ì‚¬ìš© ê¸°ìˆ  ë° ë¼ì´ë¸ŒëŸ¬ë¦¬

- Python Django,MongoDB, MySQL
- XAI - shap, Scikit-learn
- html, css
- scrapy, beautifulsoup, konlpy, nltk
- Aws - ec2, apache2

<br/>

## ğŸ’¡ ê¹¨ë‹¬ì€ ì 

- ì„¤ëª… ê°€ëŠ¥ ì¸ê³µì§€ëŠ¥ ê¸°ë²•ì„ í†µí•´ ì¸ê³µì§€ëŠ¥ ëª¨í˜•ì˜ í•™ìŠµ ê³¼ì •ì„ ë¶„ì„í•  ìˆ˜ ìˆìŒ.
- ì£¼ì‹ ë°ì´í„°ì˜ ë…¸ì´ì¦ˆë¥¼ autoencoderë¥¼ í™œìš©í•˜ì—¬ ì œê±°
- ì •í˜• ë°ì´í„° ë¶„ì„ì—ì„œ ë”¥ëŸ¬ë‹ ëª¨ë¸ë³´ë‹¤ ì•™ìƒë¸” ëª¨ë¸ë¡œ ìš°ìˆ˜í•œ ì„±ëŠ¥ì„ ë‚¼ ìˆ˜ ìˆìŒ.
- ì¥ê¸° í”„ë¡œì íŠ¸ì— ì‘ì—…ëŸ‰ì´ ë§ì•„ íŒ€ì›ë“¤ì´ ëª¨ë‘ ì§€ì¹  ìˆ˜ ìˆëŠ” ìƒí™©ì´ì—ˆì§€ë§Œ, í•¨ê»˜í•  ë•Œ ì‹œë„ˆì§€ê°€ ì¢‹ì€ íŒ€ì›ë“¤ì„ ë§Œë‚˜ë©´ ì¬ë°Œê²Œ ì§„í–‰í•  ìˆ˜ ìˆìŒ.
- íŒ€ì›ë“¤ 5ëª…ì´ ëª¨ë‘ ë¹„ìŠ·í•œ ê¸°ìˆ  ìŠ¤íƒì„ ê°€ì§€ê³  ìˆì–´ì„œ, ë¶„ë°°ê°€ ì–´ë ¤ì›€.
    - í•´ê²°: ì›¹ê°œë°œ íŒŒíŠ¸ë¥¼ ê¸°ëŠ¥ë³„ë¡œ ë‚˜ëˆ ì„œ ì‘ì—… ë¶„ë°°.

<br/>

## ğŸ‘€Â  ì„œë¹„ìŠ¤ í™”ë©´

![ì„œë¹„ìŠ¤ í™”ë©´ ë©”ì¸ - AI ë¶„ì„](https://user-images.githubusercontent.com/90924434/173228468-b5a79316-c55c-4ee8-8a7c-4179fd89ac4b.png)

![ì„œë¹„ìŠ¤ í™”ë©´ 1 - ê°ì„± ë¶„ì„](https://user-images.githubusercontent.com/90924434/173228474-817c2ecf-9049-4712-8782-9eb2afe507e9.png)

![ì„œë¹„ìŠ¤ í™”ë©´ 2 - ìº”ë“¤ ìŠ¤í‹± ì°¨íŠ¸](https://user-images.githubusercontent.com/90924434/173228484-75d38ce1-a2c1-4768-9fb9-b54164c000cf.png)


# Donghak_gaemi
ë¹…ë°ì´í„° ê¸°ë°˜ ì£¼ì‹ ë° ë‰´ìŠ¤ ë¶„ì„ ì‹œìŠ¤í…œ êµ¬ì¶•
ì›¹í˜ì´ì§€ êµ¬ì¶•

## Description


## ì›¹í˜ì´ì§€ êµ¬ì¶•
- Django ì‚¬ìš©

```python
{% block content %}

{% endblock %}
```
- ê¸°ë³¸ ë°”íƒ•ì´ ë˜ëŠ” base.htmlì„ ìƒì„±í›„ ë³€ë™ë˜ëŠ” ë¶€ë¶„ë§Œ `{% block content %}` ìœ¼ë¡œ ê°ì‹¸ì£¼ì–´ í•´ë‹¹ ë¶€ë¶„ë§Œ ê° í˜ì´ì§€ì— ë§ê²Œ ë³€ê²½

```python
{% extends 'base.html' %}
{% block content %}
{% endblock %}
```
- ë³€ê²½í•  htmlì—ì„œ `{% extends 'base.html' %}`ì½”ë“œë¥¼ ì‚¬ìš©í•´ base.htmlì„ ê¸°ë³¸ ë°”íƒ•ìœ¼ë¡œ ì‚¬ìš©
- ë³€ê²½ë˜ëŠ” ë‚´ìš©ì€ base.htmlê³¼ ë™ì¼í•˜ê²Œ `{% block content %}` ì•ˆì— ì‘ì„±

### ì‹œì‘í˜ì´ì§€(ì¢…ëª© ë‚˜ì—´, ai ë¶„ì„ ê²°ê³¼)

![gaemis](https://user-images.githubusercontent.com/80117053/149608091-2b13b036-3aa3-4fa9-9cab-77258a50e162.png)

1. ë³€ìˆ˜ ì „ë‹¬(ë°ì´í„° ì „ë‹¬)

`views.py`
```python 
def home(request):
    MAX_LIST_CNT = 10 # í•œ í˜ì´ì§€ì— ë³´ì—¬ì£¼ëŠ” ì¢…ëª© ìˆ˜
    name = stockModel.objects.values('stock_name')
    r = []
    for n in name: # ì£¼ì‹ ë¦¬ìŠ¤íŠ¸ ìƒì„±
        code = stockModel.objects.filter(stock_name=n['stock_name']).values('stock_code')[0]
        price_id = priceModel.objects.filter(stock_code = code['stock_code']).order_by('-date').values('stock_id')[0] # ì£¼ê°€ ì•„ì´ë””
        close = priceModel.objects.filter(stock_code = code['stock_code']).order_by('-date').values('close')[0]
        before = priceModel.objects.filter(stock_code = code['stock_code']).order_by('-date').values('close')[1]
        fluc = round(((close['close'] - before['close'])/close['close']), 2)
        fluction = {'fluction':fluc}
        predict = predictModel.objects.filter(stock_id = price_id['stock_id']).values('result')[0]
        accuracy = accuracyModel.objects.filter(stock_code = code['stock_code']).order_by('-model_id').values('accuracy')[0]
        result = {**n, **code, **close, **predict, **accuracy, **price_id, **fluction}
        r.append(result)
```
- Djangoì—ì„œ ë°ì´í„° í˜•íƒœëŠ” jsonì´ê¸°ì— ì „ë‹¬ë˜ëŠ” ë³€ìˆ˜ì˜ ë°ì´í„° í˜•íƒœë„ json í˜•íƒœì—¬ì•¼ í•œë‹¤
- í•˜ì§€ë§Œ ì—¬ëŸ¬ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ì •ë³´ë¥¼ ì¶”ì¶œí•˜ê³  í†µí•©í•˜ì—¬ ì „ë‹¬í•˜ëŠ”ë° ìˆì–´ ë‹¨ìˆœ ì¿¼ë¦¬ë¡œëŠ” í•œê³„ê°€ ìˆì–´ ê° ë°ì´í„°ë“¤ì„ ë”•ì…”ë„ˆë¦¬ í˜•íƒœë¡œ ë§Œë“¤ì–´ ì „ë‹¬í•´ì•¼ í•œë‹¤
- list.htmlì—ì„œ ë°˜ë³µë¬¸ì„ í™œìš©í•˜ì—¬ í…Œì´ë¸”ì„ ìƒì„±í•˜ê¸°ì— ê° ì •ë³´ë“¤ì„ ë”•ì…”ë„ˆë¦¬ë¡œ ë§Œë“¤ì–´ ë” í° ë”•ì…”ë„ˆë¦¬ í•˜ë‚˜ë¡œ ë¬¶ì–´ ì „ë‹¬
- ì¸ë±ìŠ¤ë¥¼ í™œìš©í•œ ì¿¼ë¦¬ëŠ” jsonë¡œ ê²°ê³¼ê°€ ì œê³µëœë‹¤. í•´ë‹¹ ì •ë³´ë“¤ì„ í•œ ë”•ì…”ë„ˆë¦¬ë¡œ ë¬¶ê¸° ìœ„í•´ {**data1, **data2}ë¥¼ ì‚¬ìš©í•´ í•˜ë‚˜ì˜ ê°ì²´ë¥¼ ìƒì„±, ì „ë‹¬


`list.html`
```python
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

            {% for list in page %}
                    <tr class = "text-center">
                        <td><a href = "detail/{{ list.stock_id }}" style = 'color:black'>{{ list.stock_name }}</a></td> <!-- ì¢…ëª©ëª… -->
                        <td>{{ list.stock_code }}</td> <!-- ì¢…ëª©ì½”ë“œ -->
                        <td>{{ list.close }}</td> <!-- ê°€ê²© -->
                        {% if list.fluction > 0 %}
                            <td id = up>{{ list.fluction }}%</td> <!-- ë“±ë½ë¥  -->
                        {% elif list.fluction <= 0 %}
                            <td id = down>{{ list.fluction }}%</td>
                        {% endif %}
                        {% if list.result == 1 %}
                            <td><button class = "btn btn-light">ìƒìŠ¹</button></td> <!-- ìƒìŠ¹/í•˜ë½ ì˜ˆì¸¡ -->
                            <td id = up>{{ list.accuracy }}%</td> <!-- í™•ë¥  -->
                        {% elif list.result == 0 %}
                            <td><button class="btn btn-primary" style = "border-radius: 30px; ">í•˜ë½</button></td>
                            <td id = down>{{ list.accuracy }}%</td> <!-- í™•ë¥  -->
                        {% endif %}

                    </tr>
            {% endfor %}
```

- bootstrap ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ html ë””ìì¸
- ë“±ë½ë¥ : ì „ë‚  ì¢…ëª© ê°€ê²©ê³¼ ì˜¤ëŠ˜ë‚  ì¢…ëª© ê°€ê²©ì˜ ë¹„ìœ¨
- ìƒìŠ¹/í•˜ë½ ì˜ˆì¸¡: ai ë¶„ì„ì„ í†µí•œ ìƒìŠ¹/í•˜ë½ ì˜ˆì¸¡
- í™•ë¥ : ai ë¶„ì„ì´ ì˜ˆì¸¡í•œ ìƒìŠ¹/í•˜ë½ í™•ë¥ (ì •í™•ë„)
- forë¬¸ì„ í™œìš©í•˜ì—¬ ë°˜ë³µì ìœ¼ë¡œ í–‰ ìƒì„±
- {{ë³€ìˆ˜.ë”•ì…”ë„ˆë¦¬í‚¤}} í˜•íƒœë¡œ ì ì–´ ê° ë”•ì…”ë„ˆë¦¬í‚¤ì— ëŒ€í•œ ë”•ì…”ë„ˆë¦¬ê°’ì„ ë¶ˆëŸ¬ì˜´

2. í˜ì´ì§•ì²˜ë¦¬

`views.py`
```python 
from django.core.paginator import Paginator

def home(request):
    MAX_LIST_CNT = 10 # í•œ í˜ì´ì§€ì— ë³´ì—¬ì£¼ëŠ” ì¢…ëª© ìˆ˜
    name = stockModel.objects.values('stock_name')
    r = []
    for n in name: # ì£¼ì‹ ë¦¬ìŠ¤íŠ¸ ìƒì„±
        code = stockModel.objects.filter(stock_name=n['stock_name']).values('stock_code')[0]
        price_id = priceModel.objects.filter(stock_code = code['stock_code']).order_by('-date').values('stock_id')[0] # ì£¼ê°€ ì•„ì´ë””
        close = priceModel.objects.filter(stock_code = code['stock_code']).order_by('-date').values('close')[0]
        before = priceModel.objects.filter(stock_code = code['stock_code']).order_by('-date').values('close')[1]
        fluc = round(((close['close'] - before['close'])/close['close']), 2)
        fluction = {'fluction':fluc}
        predict = predictModel.objects.filter(stock_id = price_id['stock_id']).values('result')[0]
        accuracy = accuracyModel.objects.filter(stock_code = code['stock_code']).order_by('-model_id').values('accuracy')[0]
        result = {**n, **code, **close, **predict, **accuracy, **price_id, **fluction}
        r.append(result)

    page = request.GET.get('page', 1)  # page ë²ˆí˜¸ë¥¼ get íŒŒë¼ë¯¸í„°ë¡œ ë°›ê³  ì—†ìœ¼ë©´ ê¸°ë³¸ê°’ 1ë¡œ ì„¤ì •
    list = r
    paginator = Paginator(list, MAX_LIST_CNT)
    page_obj = paginator.get_page(page)
    context = {'page': page_obj}
    return render(request, 'stock/list.html', context)
```
- í˜ì´ì§•ì²˜ë¦¬ë¥¼ ìœ„í•´ Paginator íŒ¨í‚¤ì§€ ì‚¬ìš©
- pageë¡œ page ë²ˆí˜¸ë¥¼ ì¸ìˆ˜ë¡œ ë°›ê³  í•´ë‹¹ pageì— ëŒ€í•œ ì •ë³´ ì–»ìŒ
- paginatorë¡œ í•´ë‹¹ pageì— ë“¤ì–´ê°ˆ ì •ë³´ì™€ í•œ í˜ì´ì§€ì— ë“¤ì–´ê°ˆ ìµœëŒ€ ì¢…ëª© ìˆ˜ë¥¼ ì •í•´ ë„£ëŠ”ë‹¤. 
- page_objì— page ë²ˆí˜¸ì— ëŒ€í•œ í˜ì´ì§€ ì •ë³´ë¥¼ ê°ì²´ë¡œ ì €ì¥í•˜ì—¬ ì „ë‹¬

`list.html`
```python
<!--í˜ì´ì§€ë¦¬ìŠ¤íŠ¸-->
    <div class = "row">
        <ul class = "pagination justify-content-center">
            {% for page_number in page.paginator.page_range %}
            {% if page_number == page.number %}
            <li class = "page-item active" aria-current="page">
                <a class = "page-link" href = ?page={{ page_number }}>{{ page_number }}</a>
            </li>
            {% else %}
            <li class = "page-item">
                <a class = "page-link" href = "?page={{ page_number }}">{{ page_number }}</a>
            </li>
            {% endif %}
            {% endfor %}

        </ul>
    </div>
```
- forë¬¸ê³¼ ifë¬¸ì„ í†µí•´ ì „ì²´ í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ ì¤‘ í˜„ì¬ í˜ì´ì§€ ë„˜ë²„ì™€ ë°˜ë³µë˜ëŠ” ì „ì²´ í˜ì´ì§€ ë¦¬ìŠ¤íŠ¸ì™€ ì¼ì¹˜í•˜ë©´ í•´ë‹¹ í˜ì´ì§€ ë§í¬ëŠ” íŒŒë€ìƒ‰ìœ¼ë¡œ í˜„ì¬ ìœ„ì¹˜ë¼ê³  í‘œì‹œë˜ê³  ê·¸ë ‡ì§€ ì•Šì€ í˜ì´ì§€ ë²ˆí˜¸ë“¤ì€ ê¸°ì¡´ ìƒíƒœë¥¼ ìœ ì§€í•œë‹¤. 



### ê°ì„±ë¶„ì„ í˜ì´ì§€

![ìŠ¤í¬ë¦°ìƒ·(206)](https://user-images.githubusercontent.com/80117053/149610964-73e02017-2bbf-44fb-b60b-fd6b314c2e25.png)

1. ê°€ê²© ì°¨íŠ¸ ìƒì„±

`views.py`
```python 
    price = priceModel.objects.filter(stock_code = close.stock_code).order_by('date')
    chart_list = []
    close_list = []
    for p in price:
        time_tuple = strptime(str(p.date), '%Y-%m-%d')
        utc_now = mktime(time_tuple) * 1000
        chart_list.append([utc_now, p.open, p.high, p.low, p.close])
        close_list.append(p.close)
    
    price = {'close':close,
             'difference':difference,
             'fluction':fluction,
             'stock':stock,
             'close_list':json.dumps(close_list),
             'chart_list':json.dumps(chart_list),
             'page':page_obj}
    return render(request, 'stock/detail.html', price)
```
> ì—¬ê¸°ì„œ ì£¼ì˜í• ì ì€ ë‚ ì§œ(date)ì¸ë° 2010-12-11ì´ë¼ëŠ” datetimeí˜•íƒœê°€ ì•„ë‹Œ utcí˜•
(1540000231)ìœ¼ë¡œ ë³€í™˜í•´ì£¼ì–´ì•¼ ë‚˜ì¤‘ì— highstockì—ì„œ ì œëŒ€ë¡œ ëœ ì‹œê°„ì¶•(xì¶•)ì„ ë§Œë“¤
ìˆ˜ ìˆë‹¤ .
- chartì— ë“¤ì–´ê°ˆ ê°€ê²©ê³¼ ë‚ ì§œ ì •ë³´ë¥¼ list í˜•íƒœë¡œ ì €ì¥. ì´ë•Œ, ë‚ ì§œì˜ í˜•íƒœëŠ” datetimeì—ì„œ utcí˜•íƒœë¡œ ë³€í™˜í•´ì¤€ë‹¤. 
- ëª¨ë“  ë°ì´í„°ëŠ” json í˜•íƒœì—¬ì•¼ í•˜ë¯€ë¡œ json.dumpsë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ë¥¼ json í˜•íƒœë¡œ ë³€í™˜í•˜ì—¬ ì „ë‹¬

`detail.html`
```python
<div id = "container" style = "margin:100px;">

    <script src = "https://code.highcharts.com/stock/highstock.js"></script>
    <script src = "https://code.jquery.com/jquery-3.3.1.min.js"></script>
        <script>
            function setChart() {
            Highcharts.setOption({
                global: {
                    useUTC: false
                }
            });
        };
            Highcharts.stockChart('container', {


        rangeSelector: {
            selected: 1
        },

        title: {
            text: ''
        },

        series: [{
            type: 'candlestick',
            name: '',
            data: {{ chart_list }}
        }]
    });
        </script>
</div>
```

- jqueryì™€ Highchartsì—ì„œ highstockì„ ì‚¬ìš©í•˜ì—¬ ì°¨íŠ¸ ìƒì„±
- rangeselector: í‘œì‹œí•  ë‚ ì§œ ë²”ìœ„ ì„ íƒ. selected:1ìœ¼ë¡œ í•˜ë©´ ê¸°ë³¸ 3ê°œì›” ì°¨íŠ¸ë¥¼ ë³´ì—¬ì¤€ë‹¤


2. ë‰´ìŠ¤ ì¹´ë“œ ìƒì„±(í˜ì´ì§• ì²˜ë¦¬ëŠ” ìœ„ ì‹œì‘ í˜ì´ì§€ì™€ ë™ì¼, ë‹¨ 6ê°œì˜ ë‰´ìŠ¤ë¥¼ í•œ í˜ì´ì§€ì— ë³´ì—¬ì¤Œ)

`views.py`
```python 
def detail_stock_news(request, id):
    close = priceModel.objects.get(stock_id = id)
    news_id = newsModel.objects.filter(stock_code = close.stock_code).order_by('-registration_date').values('news_id')
    news_list = []
    for n in news_id:
        news_press = newsModel.objects.filter(news_id = n['news_id']).values('press')[0]
        news_link = newsModel.objects.filter(news_id = n['news_id']).values('link')[0]
        news_title = newsModel.objects.filter(news_id = n['news_id']).values('title')[0]
        result = sentimentModel.objects.filter(news_id = n['news_id']).values('result')[0]
        list = {**news_press, **news_link, **news_title, **result}
        news_list.append(list)
```
- id ì¸ìˆ˜ë¥¼ í†µí•´ stock_idë¥¼ ì „ë‹¬ë°›ì•„ ì‚¬ìš©
- ìœ„ ì‹œì‘ í˜ì´ì§€ì™€ ë™ì¼í•˜ê²Œ ê° ë°ì´í„°ë² ì´ìŠ¤ë¡œë¶€í„° ë°ì´í„°ë¥¼ ì¶”ì¶œí•´ í•˜ë‚˜ì˜ ê°ì²´ë¡œ í†µí•©í•´ ì „ë‹¬
- í•´ë‹¹ ì¢…ëª©ì— ëŒ€í•œ ë‰´ìŠ¤, ê° ë‰´ìŠ¤ ë³„ ê°ì„±ë¶„ì„ ê²°ê³¼, ë§í¬ë¥¼ ì „ë‹¬ í•´ë‹¹ ë‰´ìŠ¤ ì›ë¬¸ìœ¼ë¡œ ì´ë™

`detail.html`
```python
<div class = "row" >
            <!-- ê°ì„±ë¶„ì„ ê²°ê³¼ -->
            <h3 style = "margin: 0px 0px 20px 120px">ë¶„ì„ê²°ê³¼</h3>
            <div class = "col" style = "margin:0px 0px 20px 120px">
                <button class = "btn btn-primary" style = "border-radius: 30px;" >ê°ì„±ë¶„ì„</button>
                <button class = "btn btn-light" style = "border-radius: 30px;"><a href = "ai/{{ close.stock_id }}">AIë¶„ì„</a></button>
            </div>
        </div>

        <div class = "row" style = "margin-left:120px">
            <!-- ë‰´ìŠ¤ ì¹´ë“œ -->
            <h3> ë‰´ìŠ¤ </h3>
        </div>
    <div class = "container" >
        <div class = "row">
            {% for n in page %}
                <div class = "col-sm-3" style="margin:25px;">
                    <div class = "card text-center" style = "border-radius: 30px;">
                        <div class = "card-header" style = "text-align:center">
                            {{ n.press }}
                        </div>
                        <div class = "card-body">
                            <a class = "card-text" href = {{ n.link }}>{{ n.title }}</a></br>
                            {% if n.result  == 1 %}
                                <button class = "btn btn-light" style = "background-color:rgba(250, 166, 176, 1);
border-radius:30px;">ìƒìŠ¹</button>
                            {% else %}
                                <button class = "btn btn-primary">í•˜ë½</button>
                            {% endif %}
                        </div>
                    </div>
                </div>
                {% if forloop.counter|divisibleby:"3" and not forloop.last %}
                </div><div class = "row">
                {% endif %}
            {% endfor %}
        </div>
```
- class cardë¥¼ ì‚¬ìš©í•˜ì—¬ ë‰´ìŠ¤ë¥¼ ì¹´ë“œ í˜•íƒœë¡œ ìƒì„±
- ë‰´ìŠ¤ ì œëª©ì— ë§í¬ë¥¼ ë‹¬ì•„ ì œëª©ì„ í´ë¦­ ì‹œ í•´ë‹¹ ë‰´ìŠ¤ ì›ë¬¸ìœ¼ë¡œ ì´ë™
- `{%if forloop.counter}`ë¥¼ ì‚¬ìš©í•˜ì—¬ í•œ ì¤„ì— 3ê°œì”© ì´ 2ì¤„ í˜•íƒœë¡œ ë‚˜ì˜¤ë„ë¡ í•¨
- í™”ë©´ í¬ê¸° ìƒ ê°œìˆ˜ë¥¼ ë” ëŠ˜ì´ë©´ í™”ë©´ ì˜†ìª½ìœ¼ë¡œ ë„˜ì–´ê°



### ai ë¶„ì„ í˜ì´ì§€

![ìŠ¤í¬ë¦°ìƒ·(207)](https://user-images.githubusercontent.com/80117053/149611449-7041144f-3ae2-4fff-afa1-0c3dc16a1cae.png)

- í•´ë‹¹ ì¢…ëª©ì— ëŒ€í•œ ê°€ê²©, ë“±ë½ë¥ , ê°€ê²©ì°¨íŠ¸ ì‹œê°í™”
- í•´ë‹¹ ì¢…ëª©ì— ëŒ€í•œ 90ì¼ í›„ ì˜ˆì¸¡ ê²°ê³¼, ì˜ˆì¸¡ í™•ë¥ 

`urls.py`
```python
urlpatterns = [
    path('detail/ai/<int:id>', views.detail_ai, name = 'detail_ai'),
]
```
- url ì„¤ì •ì—ì„œ ai ë¶„ì„ í˜ì´ì§€ë¡œ ê°„ í›„ ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê±°ë‚˜ ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ë„˜ì–´ê°€ëŠ” urlë¡œ ìƒì„±í•˜ì§€ ëª»í•¨(ë³´ì™„ í•„ìš”)


